# Coding Platform

Платформа для решения задач по программированию с автоматической проверкой решений и анализом ошибок с помощью LLM.

## Функциональность

- Регистрация и авторизация пользователей
- Три роли пользователей: обычный пользователь, учитель, администратор
- Просмотр и фильтрация задач по темам и уровню сложности
- Решение задач с помощью встроенного редактора кода
- Автоматическая проверка решений на тестовых случаях
- Интеллектуальный анализ ошибок с помощью LLM
- История решений пользователя
- Управление задачами для учителей и администраторов
- Готовые примеры задач разной сложности и тематики

## Документация

Проект имеет полную документацию, созданную с использованием Sphinx. Документация включает:

- Инструкции по установке и настройке
- Руководство пользователя
- Описание архитектуры системы
- API-документацию для основных модулей

Для просмотра документации:

1. Соберите документацию:
```bash
cd docs
make html
```

2. Откройте файл `docs/build/html/index.html` в браузере

Подробную информацию о работе с документацией можно найти в файле [docs_guide.md](docs_guide.md).

## Установка

1. Клонируйте репозиторий:
```bash
git clone <repository-url>
cd coding-platform
```

2. Создайте виртуальное окружение и активируйте его:
```bash
python -m venv venv
source venv/bin/activate  # для Linux/Mac
venv\Scripts\activate     # для Windows
```

3. Установите зависимости:
```bash
pip install -r requirements.txt
```

4. Создайте файл `.env` в корневой директории проекта и добавьте следующие переменные:
```
SECRET_KEY=your-secret-key
OPENAI_API_KEY=your-openai-api-key
```

## Запуск

1. Запустите приложение:
```bash
python app.py
```

2. Откройте браузер и перейдите по адресу `http://localhost:5000`

3. Войдите как администратор (логин: admin, пароль: admin)

4. Для загрузки примеров задач, перейдите по адресу `/admin/initialize_samples`

## Структура проекта

```
coding-platform/
├── app.py              # Основной файл приложения
├── utils.py            # Утилиты для работы с кодом и тестами
├── ai_helper.py        # Модуль для анализа ошибок с помощью LLM
├── decorators.py       # Декораторы для проверки прав доступа
├── init_db.py          # Скрипт для инициализации базы данных с примерами
├── schema.sql          # Схема базы данных
├── requirements.txt    # Зависимости проекта
├── .env                # Конфигурационные переменные
└── templates/          # Шаблоны страниц
    ├── base.html
    ├── index.html
    ├── problem.html
    ├── add_problem.html
    ├── edit_problem.html
    ├── my_solutions.html
    ├── login.html
    ├── register.html
    ├── about.html
    └── initialize_samples.html
```

## Использование

1. Зарегистрируйтесь на платформе или войдите как администратор (admin/admin)
2. Просматривайте доступные задачи на главной странице
3. Используйте фильтры для поиска задач по теме и сложности
4. Решайте задачи с помощью встроенного редактора кода
5. Отправляйте решения для проверки
6. При возникновении ошибок получайте интеллектуальный анализ и рекомендации
7. Просматривайте историю своих решений
8. Учителя и администраторы могут создавать и редактировать задачи

## Анализ ошибок с помощью ИИ

Платформа использует интеграцию с OpenAI API для анализа ошибок в коде пользователя:

1. При возникновении ошибки система определяет её тип (синтаксическая, времени выполнения, логическая)
2. Для синтаксических ошибок предоставляется базовый анализ без использования LLM
3. Для других типов ошибок система отправляет запрос к OpenAI API с кодом, ошибкой и тестовыми случаями
4. LLM анализирует ошибку и предоставляет структурированный ответ с объяснением и рекомендациями
5. Пользователь получает рекомендации по исправлению ошибки, но не готовое решение

## База данных

Проект использует SQLite напрямую через стандартную библиотеку `sqlite3`. Это позволяет обойтись без использования ORM, таких как SQLAlchemy, и упрощает структуру проекта.

Схема базы данных определена в файле `schema.sql` и включает:
- Таблицу пользователей (`users`)
- Таблицу задач (`problems`)
- Таблицу решений (`solutions`)

База данных автоматически инициализируется при первом запуске приложения.

## Примеры задач

Система имеет встроенные примеры задач разной сложности:

- **Легкие задачи:** Сумма чисел, Поиск максимального числа
- **Задачи средней сложности:** Проверка на палиндром, Числа Фибоначчи, Стек
- **Сложные задачи:** Сортировка пузырьком

Администратор может загрузить эти примеры через специальный интерфейс.

## Безопасность

- Все пароли хешируются перед сохранением в базе данных
- Реализована система ролей для контроля доступа
- Код пользователя выполняется в изолированном окружении
- Используются безопасные методы для работы с файлами и процессами

## Лицензия

MIT 